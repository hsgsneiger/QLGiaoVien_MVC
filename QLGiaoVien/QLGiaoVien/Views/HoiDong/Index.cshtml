@model List<DAO.LecturerDAO>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<DAO.YearDAO> dsNam = (List<DAO.YearDAO>)ViewBag.dsNam;
}
<div class="row">
    <div class="col-5">
        <div class="form-group">
            <label for="email">Giáo viên:</label>
            <select class="form-control" id="GV">
                @for (int i = 0; i < Model.Count; i++)
                {
                    <option value='@Model[i].id'>@Model[i].HoTen</option>
                }
            </select>
        </div>
    </div>
    <div class="col-5">
        <div class="form-group">
            <label for="email">Năm:</label>
            <select class="form-control" id="Nam">
                <option value='null'>Tất cả</option>
                @for (int i = 0; i < dsNam.Count; i++)
                {
                    <option value='@dsNam[i].id'>Năm Học @dsNam[i].TenNamHoc</option>
                }
            </select>
        </div>
    </div>
    <div class="col-2 mt-4">
        <button class="btn btn-primary btnSearch">Tìm kiếm</button>
    </div>
</div>
<div class="d-flex justify-content-end pr-5 mb-2">
    <button class="btn btn-danger btnExport">Export to Excel</button>

</div>
<div id="data-table">

</div>
<script>
    var urlTb = '/HoiDong/_DanhSachHoiDong'
    $(document).ready(function () {
        $("#GV,#Nam").select2();
    })

    $(".btnSearch").click(function () {
        $.ajax({
            url: 'HoiDong/_DanhSachHoiDong',
            method: "post",
            data: {
                "MaGV": +$("#GV").val(),
                "NamHoc": +$("#Nam").val()
            }
        }).done(function (result) {
            $("#data-table").html(result);
        })
    })

    $(".btnExport").click(function () {
        Features.exportToExcel('dataTable', $("#GV").text().replace(/[\s]\s/g, ''));
    })
</script>
